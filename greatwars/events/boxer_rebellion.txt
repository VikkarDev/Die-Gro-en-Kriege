add_namespace = boxer_rebellion

# EIGHT-NATION ALLIANCE
country_event = {
	id = boxer_rebellion.1

	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes

	#trigger = {
	#	#date = 1900.6.10
  	#}

	immediate = {
		GER = {
			create_faction = "Eight-Nation Alliance"

			add_to_faction = ENG
			add_to_faction = SOV
			add_to_faction = JAP
			add_to_faction = GER
			add_to_faction = USA
			add_to_faction = ITA
			add_to_faction = AUS
			add_to_faction = FRA
		}

		news_event = { id = dgk_news.1 }
	}
}

# EVENT TO SIGN PEACE AND TRANSFER OWNERSHIP TO QING | WARLOADS ARE BORN
country_event = {
	id = boxer_rebellion.2

	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes

	trigger = {
		CHI = {
			has_completed_focus = CHI_1900_taku_forts
		}
	}

	immediate = {

		CHI = {
			declare_war_on = {
				target = SOV
				type = take_state
			}
			declare_war_on = {
				target = ENG
				type = take_state
			}
			declare_war_on = {
				target = GER
				type = take_state
			}
			declare_war_on = {
				target = AUS
				type = take_state
			}
			declare_war_on = {
				target = ITA
				type = take_state
			}
			declare_war_on = {
				target = JAP
				type = take_state
			}
			declare_war_on = {
				target = FRA
				type = take_state
			}
			declare_war_on = {
				target = USA
				type = take_state
			}
			declare_war_on = {
				target = SPR
				type = take_state
			}
			declare_war_on = {
				target = BEL
				type = take_state
			}
			declare_war_on = {
				target = HOL
				type = take_state
			}
			set_country_flag = CHI_boxer_war_eight_nation
		}
	}
}
	country_event = {
			id = boxer_rebellion.3
			title = boxer_rebellion.3.t
			desc = boxer_rebellion.3.d
			picture = GFX_report_event_soldiers_marching

			trigger = {
				CHI = {
				has_country_flag = CHI_boxer_war_eight_nation

				}
			}

			fire_only_once = yes
			hidden = yes
			is_triggered_only = yes
			immediate = {
		SHA = {
			transfer_state = 597
			transfer_state = 825
			add_state_core = 597
			add_state_core = 825
		}
		JIA = {
			transfer_state = 598
			transfer_state = 613
		}
		ZHE = {
			transfer_state = 596
			add_state_core = 596
		}
		FUJ = {
			transfer_state = 595
		}
		GUD = {
			transfer_state = 593
			transfer_state = 592
			transfer_state = 594
			transfer_state = 591
			transfer_state = 823
		}
		JIX = {
			transfer_state = 600
		}
		HNN = {
			transfer_state = 602
			transfer_state = 750
		}
		HBE = {
			transfer_state = 620
			transfer_state = 824
		}
		ANH = {
			transfer_state = 606
			transfer_state = 749
			transfer_state = 826
		}
		GXC = {
			transfer_state = 599
		}
	}
	}


# PEACE DEAL
country_event = {
	id = boxer_rebellion.4

	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes

	#trigger = {
	#	#date = 1901.9.7
	#	NOT = {
	#		has_global_flag = is_dgk_scripted_false
	#	}
  	#}

	immediate = {
		GER = {
			white_peace = CHI
		}

		SOV = {
			transfer_state = 717
			transfer_state = 714
			transfer_state = 761
			transfer_state = 716
			transfer_state = 328
		}

		CHI = {
			transfer_state = 599
			transfer_state = 606
			transfer_state = 749
			transfer_state = 826
			transfer_state = 620
			transfer_state = 824
			transfer_state = 602
			transfer_state = 750
			transfer_state = 600
			transfer_state = 593
			transfer_state = 592
			transfer_state = 594
			transfer_state = 591
			transfer_state = 823
			transfer_state = 595
			transfer_state = 596
			transfer_state = 598
			transfer_state = 613
			transfer_state = 597
			transfer_state = 825
		}

		news_event = { id = dgk_news.2 }

		GER = {
			country_event = { id = boxer_rebellion.4 days = 342 }
			add_threat = -35
		}
	}
}

# ALLIANCE FALLS
country_event = {
	id = boxer_rebellion.4

	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes

	#trigger = {
	#	#date = 1902.8.15
	#	NOT = {
	#		has_global_flag = is_dgk_scripted_false
	#	}
  	#}

	immediate = {
		GER = {
			dismantle_faction = yes
			add_threat = -35

			create_faction = "Central Powers"
			add_to_faction = AUS
			add_to_faction = ITA
		}
	}
}

# EVENT IF BOXER REBELLION WINS
country_event = {
	id = boxer_rebellion.5
	title = boxer_rebellion.5.t
	desc = boxer_rebellion.5.d
	picture = GFX_report_event_soldiers_marching

	fire_only_once = yes
	hidden = no
	is_triggered_only = yes

	option = {
		name = boxer_rebellion.5.a

		CHI = {
			white_peace = BOX
		}
		hidden_effect = {
			CHI = {
				set_capital = 613
			}
		}
		add_political_power = 150

		ai_chance = { factor = 100 }
	}
}